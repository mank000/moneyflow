{% extends "base.html" %}
{% load django_bootstrap5 %}
{% block content %}
<h1>–î–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏</h1>
<form method="get">
    <label>–¢–∏–ø:
        <select name="type">
            <option value="">–í—Å–µ</option>
            {% for t in types %}
                <option value="{{ t.id }}" {% if t.id|stringformat:"s" == request.GET.type %}selected{% endif %}>
                    {{ t.name }}
                </option>
            {% endfor %}
        </select>
    </label>
    <br>

    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:
        <select name="category">
            <option value="">–í—Å–µ</option>
            {% for c in categories %}
                <option value="{{ c.id }}" {% if c.id|stringformat:"s" == request.GET.category %}selected{% endif %}>
                    {{ c.name }}
                </option>
            {% endfor %}
        </select>
    </label>
    <br>
    <label>–°—Ç–∞—Ç—É—Å:
        <select name="status">
            <option value="">–í—Å–µ</option>
            {% for s in statuses %}
                <option value="{{ s.id }}" {% if s.id|stringformat:"s" == request.GET.status %}selected{% endif %}>
                    {{ s.name }}
                </option>
            {% endfor %}
        </select>
    </label>
    <br>

    <label>–î–∞—Ç–∞ —Å:
        <input type="date" name="date_from" value="{{ date_from }}">
    </label>

    <label>–ø–æ:
        <input type="date" name="date_to" value="{{ date_to }}">
    </label>
    <br>
    {% bootstrap_button button_type="submit" content="–§–∏–ª—å—Ç—Ä" %}
    
</form>
<table>
    <thead>
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–¢–∏–ø</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–°—É–º–º–∞</th>
            <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
        </tr>
    </thead>
    <tbody>
        {% for flow in flows %}
            <tr>
                <td>{{ flow.date_of_creation }}</td>
                <td>{{ flow.status.name }}</td>
                <td>{{ flow.type.name }}</td>
                <td>{{ flow.category.name }}</td>
                <td>{{ flow.sub_category.name }}</td>
                <td>{{ flow.total }} ‚ÇΩ</td>
                <td>{{ flow.description|default:"‚Äî" }}</td>
                <td>
                    <a href="{% url 'entities:moneyflow_update' flow.pk %}">‚úèÔ∏è</a>
                    <a href="{% url 'entities:moneyflow_delete' flow.pk %}">üóëÔ∏è</a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="7">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'entities:moneyflow_create' %}" class="add-button btn btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</a>

{% endblock %}